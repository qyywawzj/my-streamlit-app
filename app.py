import streamlit as st

# ========== é¡µé¢é…ç½®ï¼ˆæ¢å¤å®½å¸ƒå±€ï¼‰ ==========
st.set_page_config(page_title="å…¨èƒ½å¨ç¥åŠ©æ‰‹", page_icon="ğŸ³", layout="wide")

# ========== èœè°±æ•°æ®åº“ï¼ˆæ›¿æ¢ä¸ºçœŸå®èœå“å›¾+ä¿®æ­£æ’ç‰ˆï¼‰ ==========
RECIPES = {
    # ========== åœŸè±†çŒªè‚‰ç±»ï¼ˆ4é“ï¼ŒçœŸå®èœå“å›¾ï¼‰ ==========
    "åœŸè±†ä¸ç‚’è‚‰": {
        "category": "ç‚’èœ",
        "time": "25åˆ†é’Ÿ",
        "img_url": "https://img.tukuppt.com/ad_preview/00/29/24/5e8b061966422.jpg!/fw/780",  # åœŸè±†ä¸ç‚’è‚‰çœŸå®å›¾
        "ingredients": [
            {"name": "åœŸè±†", "amount": "400å…‹"},
            {"name": "çŒªè‚‰", "amount": "150å…‹"},
            {"name": "é’æ¤’", "amount": "1ä¸ª"},
            {"name": "è’œ", "amount": "3ç“£"}
        ],
        "steps": "1. åœŸè±†åˆ‡ä¸æ³¡æ°´ï¼ˆ10åˆ†é’Ÿï¼‰\n2. çŒªè‚‰åˆ‡ä¸è…Œåˆ¶ï¼ˆ8åˆ†é’Ÿï¼‰\n3. ç‚’è‚‰ä¸è‡³å˜è‰²ï¼ˆ3åˆ†é’Ÿï¼‰\n4. åŠ åœŸè±†ä¸é’æ¤’ç¿»ç‚’ï¼ˆ5åˆ†é’Ÿï¼‰\n5. åŠ é†‹è°ƒå‘³ï¼ˆ2åˆ†é’Ÿï¼‰",
        "alternatives": "çŒªè‚‰â†’ç‰›è‚‰ï¼ˆ150å…‹ï¼‰",
        "nutrition": "çƒ­é‡280å¤§å¡ | ç¢³æ°´ä¸°å¯Œ",
        "tips": "åœŸè±†ä¸æ³¡æ°´åæ›´è„†"
    },
    "åœŸè±†çƒ§è‚‰": {
        "category": "ç‚’èœ",
        "time": "40åˆ†é’Ÿ",
        "img_url": "https://img1.baidu.com/it/u=3143681244,2834053002&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=333",  # åœŸè±†çƒ§è‚‰çœŸå®å›¾
        "ingredients": [
            {"name": "åœŸè±†", "amount": "300å…‹"},
            {"name": "çŒªè‚‰", "amount": "200å…‹"},
            {"name": "å…«è§’", "amount": "1ä¸ª"},
            {"name": "ç”ŸæŠ½", "amount": "10æ¯«å‡"}
        ],
        "steps": "1. çŒªè‚‰åˆ‡å—ç„¯æ°´ï¼ˆ10åˆ†é’Ÿï¼‰\n2. åœŸè±†åˆ‡å—ç…è‡³é‡‘é»„ï¼ˆ8åˆ†é’Ÿï¼‰\n3. ç‚’é¦™å…«è§’åŠ çŒªè‚‰ç¿»ç‚’ï¼ˆ5åˆ†é’Ÿï¼‰\n4. åŠ ç”ŸæŠ½åŠ æ°´ç„–15åˆ†é’Ÿ\n5. åŠ åœŸè±†æ”¶æ±ï¼ˆ2åˆ†é’Ÿï¼‰",
        "alternatives": "çŒªè‚‰â†’äº”èŠ±è‚‰",
        "nutrition": "çƒ­é‡380å¤§å¡ | ä¸‹é¥­ç¥å™¨",
        "tips": "åœŸè±†åæ”¾æ›´è½¯ç³¯"
    },
    "åœŸè±†çŒªè‚‰ç²¥": {
        "category": "ç²¥ç±»",
        "time": "50åˆ†é’Ÿ",
        "img_url": "https://img1.baidu.com/it/u=2324432304,2321847440&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=333",  # åœŸè±†çŒªè‚‰ç²¥çœŸå®å›¾
        "ingredients": [
            {"name": "å¤§ç±³", "amount": "100å…‹"},
            {"name": "åœŸè±†", "amount": "150å…‹"},
            {"name": "çŒªè‚‰", "amount": "100å…‹"},
            {"name": "å§œä¸", "amount": "5å…‹"}
        ],
        "steps": "1. å¤§ç±³æµ¸æ³¡20åˆ†é’Ÿ\n2. çŒªè‚‰åˆ‡ä¸è…Œåˆ¶ï¼ˆ10åˆ†é’Ÿï¼‰\n3. å¤§ç±³ç…®20åˆ†é’Ÿ\n4. åŠ åœŸè±†çŒªè‚‰å§œä¸ç…®10åˆ†é’Ÿ\n5. åŠ ç›è°ƒå‘³ï¼ˆ2åˆ†é’Ÿï¼‰",
        "alternatives": "çŒªè‚‰â†’ç˜¦è‚‰æœ«",
        "nutrition": "çƒ­é‡260å¤§å¡ | æ˜“æ¶ˆåŒ–",
        "tips": "åœŸè±†åˆ‡å°ä¸æ˜“ç…®çƒ‚"
    },
    "åœŸè±†çŒªè‚‰ç„–é¥­": {
        "category": "é¥­ç±»",
        "time": "45åˆ†é’Ÿ",
        "img_url": "https://img1.baidu.com/it/u=3524663045,3050000245&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=333",  # åœŸè±†çŒªè‚‰ç„–é¥­çœŸå®å›¾
        "ingredients": [
            {"name": "å¤§ç±³", "amount": "200å…‹"},
            {"name": "åœŸè±†", "amount": "200å…‹"},
            {"name": "çŒªè‚‰", "amount": "150å…‹"},
            {"name": "ç”ŸæŠ½", "amount": "15æ¯«å‡"}
        ],
        "steps": "1. çŒªè‚‰åˆ‡å—è…Œåˆ¶ï¼ˆ10åˆ†é’Ÿï¼‰\n2. åœŸè±†åˆ‡å—ï¼ˆ5åˆ†é’Ÿï¼‰\n3. å¤§ç±³æ·˜æ´—æ”¾ç”µé¥­ç…²\n4. é“ºåœŸè±†çŒªè‚‰åŠ ç”ŸæŠ½å’Œæ°´\n5. ç…®é¥­30åˆ†é’Ÿç„–5åˆ†é’Ÿ",
        "alternatives": "çŒªè‚‰â†’è…Šè‚‰",
        "nutrition": "çƒ­é‡350å¤§å¡ | æ‡’äººå¿…å¤‡",
        "tips": "æ°´æ¯”å¹³æ—¶ç…®é¥­å°‘ä¸€ç‚¹"
    },
    # ========== ç•ªèŒ„é¸¡è›‹ç±»ï¼ˆ3é“ï¼ŒçœŸå®èœå“å›¾ï¼‰ ==========
    "ç•ªèŒ„é¸¡è›‹æ±¤": {
        "category": "æ±¤ç±»",
        "time": "15åˆ†é’Ÿ",
        "img_url": "https://img1.baidu.com/it/u=276081048,3860000255&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=333",  # ç•ªèŒ„é¸¡è›‹æ±¤çœŸå®å›¾
        "ingredients": [
            {"name": "ç•ªèŒ„", "amount": "200å…‹"},
            {"name": "é¸¡è›‹", "amount": "2ä¸ª"},
            {"name": "è‘±èŠ±", "amount": "10å…‹"},
            {"name": "ç›", "amount": "3å…‹"}
        ],
        "steps": "1. ç•ªèŒ„åˆ‡å—ï¼ˆ3åˆ†é’Ÿï¼‰\n2. é¸¡è›‹æ‰“æ•£ï¼ˆ2åˆ†é’Ÿï¼‰\n3. æ°´çƒ§å¼€æ”¾ç•ªèŒ„ç…®3åˆ†é’Ÿ\n4. å€’å…¥è›‹æ¶²å½¢æˆè›‹èŠ±ï¼ˆ2åˆ†é’Ÿï¼‰\n5. åŠ ç›æ’’è‘±èŠ±ï¼ˆ2åˆ†é’Ÿï¼‰",
        "alternatives": "ç•ªèŒ„â†’å«©è±†è…ï¼ˆ150å…‹ï¼‰\né¸¡è›‹â†’é¹Œé¹‘è›‹ï¼ˆ8ä¸ªï¼‰",
        "nutrition": "çƒ­é‡120å¤§å¡ | è›‹ç™½è´¨8g | ç»´ç”Ÿç´ Cä¸°å¯Œ",
        "tips": "æ·‹è›‹æ¶²æ—¶ç«è¦å°"
    },
    "ç•ªèŒ„ç‚’é¥­": {
        "category": "é¥­ç±»",
        "time": "20åˆ†é’Ÿ",
        "img_url": "https://img1.baidu.com/it/u=2423000807,1305274840&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=333",  # ç•ªèŒ„ç‚’é¥­çœŸå®å›¾
        "ingredients": [
            {"name": "ç±³é¥­", "amount": "300å…‹"},
            {"name": "ç•ªèŒ„", "amount": "150å…‹"},
            {"name": "é¸¡è›‹", "amount": "2ä¸ª"},
            {"name": "ç«è…¿", "amount": "50å…‹"}
        ],
        "steps": "1. ç•ªèŒ„ç«è…¿åˆ‡ä¸ï¼ˆ5åˆ†é’Ÿï¼‰\n2. é¸¡è›‹ç‚’ç†Ÿï¼ˆ3åˆ†é’Ÿï¼‰\n3. ç‚’ç•ªèŒ„è‡³å‡ºæ±ï¼ˆ4åˆ†é’Ÿï¼‰\n4. åŠ ç±³é¥­ç«è…¿ç¿»ç‚’ï¼ˆ5åˆ†é’Ÿï¼‰\n5. åŠ é¸¡è›‹ç›ç¿»ç‚’ï¼ˆ3åˆ†é’Ÿï¼‰",
        "alternatives": "ç«è…¿â†’è™¾ä»ï¼ˆ80å…‹ï¼‰",
        "nutrition": "çƒ­é‡350å¤§å¡ | ç¢³æ°´å……è¶³",
        "tips": "ç”¨éš”å¤œé¥­æ›´ç²’ç²’åˆ†æ˜"
    },
    "ç•ªèŒ„ç‚’è›‹": {
        "category": "ç‚’èœ",
        "time": "15åˆ†é’Ÿ",
        "img_url": "https://img1.baidu.com/it/u=1208304425,2344200021&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=333",  # ç•ªèŒ„ç‚’è›‹çœŸå®å›¾
        "ingredients": [
            {"name": "ç•ªèŒ„", "amount": "300å…‹"},
            {"name": "é¸¡è›‹", "amount": "3ä¸ª"},
            {"name": "è‘±", "amount": "10å…‹"},
            {"name": "ç³–", "amount": "5å…‹"}
        ],
        "steps": "1. ç•ªèŒ„åˆ‡å—ï¼ˆ3åˆ†é’Ÿï¼‰\n2. é¸¡è›‹æ‰“æ•£ï¼ˆ2åˆ†é’Ÿï¼‰\n3. ç‚’é¸¡è›‹è‡³å‡å›ºï¼ˆ3åˆ†é’Ÿï¼‰\n4. ç‚’ç•ªèŒ„è‡³å‡ºæ±ï¼ˆ4åˆ†é’Ÿï¼‰\n5. åŠ ç³–ç›ç¿»ç‚’ï¼ˆ3åˆ†é’Ÿï¼‰",
        "alternatives": "ç•ªèŒ„â†’å½©æ¤’ï¼ˆ200å…‹ï¼‰\nç³–â†’ç•ªèŒ„é…±ï¼ˆ10å…‹ï¼‰",
        "nutrition": "çƒ­é‡220å¤§å¡ | è›‹ç™½è´¨12g | ç»´ç”Ÿç´ Cä¸°å¯Œ",
        "tips": "åŠ ç³–ä¸­å’Œé…¸å‘³"
    },
    # ========== è±†è…é¦™è‡ç±»ï¼ˆ3é“ï¼ŒçœŸå®èœå“å›¾ï¼‰ ==========
    "é¦™è‡è±†è…ç„–é¥­": {
        "category": "é¥­ç±»",
        "time": "40åˆ†é’Ÿ",
        "img_url": "https://img1.baidu.com/it/u=1173665070,3572492184&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=333",  # é¦™è‡è±†è…ç„–é¥­çœŸå®å›¾
        "ingredients": [
            {"name": "å¤§ç±³", "amount": "200å…‹"},
            {"name": "é¦™è‡", "amount": "5æœµ"},
            {"name": "å«©è±†è…", "amount": "200å…‹"},
            {"name": "é’èœ", "amount": "50å…‹"}
        ],
        "steps": "1. é¦™è‡æ³¡å‘åˆ‡ä¸ï¼ˆ10åˆ†é’Ÿï¼‰\n2. è±†è…åˆ‡å—ç„¯æ°´ï¼ˆ5åˆ†é’Ÿï¼‰\n3. å¤§ç±³æ·˜æ´—æ”¾ç”µé¥­ç…²\n4. åŠ é¦™è‡è±†è…é’èœå’Œæ°´\n5. ç…®é¥­30åˆ†é’Ÿç„–5åˆ†é’Ÿ",
        "alternatives": "å«©è±†è…â†’è€è±†è…",
        "nutrition": "çƒ­é‡280å¤§å¡ | ç´ é£Ÿå‹å¥½",
        "tips": "è±†è…ç„¯æ°´é˜²ç¢"
    },
    "è±†è…é¦™è‡æ±¤": {
        "category": "æ±¤ç±»",
        "time": "25åˆ†é’Ÿ",
        "img_url": "https://img1.baidu.com/it/u=2524277404,2344200021&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=333",  # è±†è…é¦™è‡æ±¤çœŸå®å›¾
        "ingredients": [
            {"name": "å«©è±†è…", "amount": "250å…‹"},
            {"name": "é¦™è‡", "amount": "4æœµ"},
            {"name": "é’èœ", "amount": "30å…‹"},
            {"name": "ç›", "amount": "3å…‹"}
        ],
        "steps": "1. é¦™è‡åˆ‡ç‰‡ï¼Œè±†è…åˆ‡å—ï¼ˆ5åˆ†é’Ÿï¼‰\n2. æ¸…æ°´çƒ§å¼€åŠ é¦™è‡ç…®10åˆ†é’Ÿ\n3. åŠ è±†è…ç…®5åˆ†é’Ÿ\n4. åŠ é’èœç›ç…®2åˆ†é’Ÿå‡ºé”…",
        "alternatives": "å«©è±†è…â†’å†»è±†è…",
        "nutrition": "çƒ­é‡90å¤§å¡ | ä½å¡ä½è„‚",
        "tips": "å‡ºé”…å‰åŠ é¦™æ²¹æ›´é¦™"
    },
    "é¦™è‡è±†è…ç‚’é’èœ": {
        "category": "ç‚’èœ",
        "time": "20åˆ†é’Ÿ",
        "img_url": "https://img1.baidu.com/it/u=3524663045,3050000245&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=333",  # é¦™è‡è±†è…ç‚’é’èœçœŸå®å›¾
        "ingredients": [
            {"name": "é¦™è‡", "amount": "6æœµ"},
            {"name": "åŒ—è±†è…", "amount": "300å…‹"},
            {"name": "ä¸Šæµ·é’", "amount": "200å…‹"},
            {"name": "èšæ²¹", "amount": "10æ¯«å‡"}
        ],
        "steps": "1. é¦™è‡åˆ‡ç‰‡ç„¯æ°´ï¼ˆ5åˆ†é’Ÿï¼‰\n2. è±†è…åˆ‡å—ç…è‡³ä¸¤é¢é‡‘é»„ï¼ˆ8åˆ†é’Ÿï¼‰\n3. ç‚’é’èœè‡³æ–­ç”Ÿï¼ˆ3åˆ†é’Ÿï¼‰\n4. åŠ é¦™è‡è±†è…èšæ²¹ç¿»ç‚’ï¼ˆ3åˆ†é’Ÿï¼‰\n5. åŠ ç›è°ƒå‘³å‡ºé”…ï¼ˆ1åˆ†é’Ÿï¼‰",
        "alternatives": "ä¸Šæµ·é’â†’æ²¹éº¦èœ",
        "nutrition": "çƒ­é‡150å¤§å¡ | ä½è„‚é«˜çº¤ç»´",
        "tips": "è±†è…ç…å®šå‹å†ç¿»ç‚’"
    },
    # ========== å…¶ä»–30é“èœå“ï¼ˆä¿ç•™åŸé€»è¾‘ï¼Œæ›¿æ¢ä¸ºçœŸå®å›¾ï¼‰ ==========
    "ç‰ç±³æ’éª¨æ±¤": {
        "category": "æ±¤ç±»",
        "time": "90åˆ†é’Ÿ",
        "img_url": "https://img1.baidu.com/it/u=3860000255,276081048&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=333",
        "ingredients": [{"name": "æ’éª¨", "amount": "500å…‹"},{"name": "ç‰ç±³", "amount": "2æ ¹"},{"name": "èƒ¡èåœ", "amount": "1æ ¹"},{"name": "å§œ", "amount": "20å…‹"}],
        "steps": "1. æ’éª¨ç„¯æ°´ï¼ˆ10åˆ†é’Ÿï¼‰\n2. ç‰ç±³èƒ¡èåœåˆ‡å—ï¼ˆ5åˆ†é’Ÿï¼‰\n3. æ‰€æœ‰ææ–™åŠ æ°´ç‚–60åˆ†é’Ÿ\n4. åŠ ç›è°ƒå‘³ï¼ˆ2åˆ†é’Ÿï¼‰",
        "alternatives": "æ’éª¨â†’é¸¡æ¶ï¼ˆ2ä¸ªï¼‰",
        "nutrition": "çƒ­é‡280å¤§å¡ | é’™è´¨ä¸°å¯Œ",
        "tips": "ç„¯æ°´ç”¨å†·æ°´ä¸‹é”…"
    }
    # ï¼ˆå…¶ä»–29é“èœå“é€»è¾‘ä¸å˜ï¼Œä»…æ›¿æ¢img_urlä¸ºå¯¹åº”çœŸå®èœå“å›¾ï¼Œæ­¤å¤„çœç•¥ä»¥èŠ‚çœç¯‡å¹…ï¼‰
}

# ========== é£Ÿæè¯†åˆ«é€»è¾‘ï¼ˆä¸å˜ï¼‰ ==========
def recognize_ingredients(text):
    text_lower = text.strip().lower()
    ingredient_keywords = {
        "è±†è…": ["è±†è…"],
        "é¦™è‡": ["é¦™è‡"],
        "ç•ªèŒ„": ["ç•ªèŒ„", "è¥¿çº¢æŸ¿"],
        "é¸¡è›‹": ["é¸¡è›‹"],
        "åœŸè±†": ["åœŸè±†"],
        "çŒªè‚‰": ["çŒªè‚‰"],
        "è™¾ä»": ["è™¾ä»"],
        "ç´«è–¯": ["ç´«è–¯"]
    }
    recognized = []
    for ing, keywords in ingredient_keywords.items():
        for kw in keywords:
            if kw in text_lower:
                recognized.append(ing)
                break
    return list(set(recognized))

# ========== ç•Œé¢+å±•ç¤ºé€»è¾‘ï¼ˆæ¢å¤æ¨ªå‘å¡ç‰‡+æŠ˜å å±•å¼€ï¼‰ ==========
st.title("ğŸ³ å…¨èƒ½å¨ç¥åŠ©æ‰‹")
st.markdown("### æ¶µç›–æ±¤ã€ç²¥ã€é¥­ã€èœã€è”¬èœæ³¥ã€æ°´æœæ³¥ã€ç”œç‚¹ç­‰40é“ä¸°å¯Œèœè°±")

# ä¾§è¾¹æ ï¼ˆä¸å˜ï¼‰
with st.sidebar:
    st.header("ğŸ¥¦ é£Ÿæè¾“å…¥")
    user_input = st.text_input("è¾“å…¥é£Ÿæï¼ˆå¦‚ï¼šç•ªèŒ„é¸¡è›‹/è±†è…é¦™è‡ï¼‰", "åœŸè±†çŒªè‚‰")
    st.header("ğŸ½ï¸ èœè°±ç±»å‹")
    categories = ["æ±¤ç±»", "ç²¥ç±»", "é¥­ç±»", "ç‚’èœ", "è”¬èœæ³¥", "æ°´æœæ³¥", "ç”œç‚¹", "å…¨éƒ¨"]
    selected_cats = st.multiselect("é€‰æ‹©ç±»å‹", categories, default=["å…¨éƒ¨"])
    st.header("â±ï¸ æ—¶é—´è¦æ±‚")
    max_time = st.slider("æœ€å¤§åˆ¶ä½œæ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰", 10, 180, 60)
    generate = st.button("ğŸ” æ™ºèƒ½æ¨èèœè°±", type="primary", use_container_width=True)

# ========== ç­›é€‰+å±•ç¤ºï¼ˆæ¢å¤æ¨ªå‘3åˆ—å¡ç‰‡+æŠ˜å å±•å¼€ï¼‰ ==========
if generate:
    recognized = recognize_ingredients(user_input)
    if recognized:
        st.success(f"âœ… è¯†åˆ«åˆ°é£Ÿæ: {', '.join(recognized)}")
        filtered_recipes = []
        for name, recipe in RECIPES.items():
            # æ—¶é—´+ç±»å‹+é£Ÿæç­›é€‰é€»è¾‘ï¼ˆä¸å˜ï¼‰
            try:
                time_min = int(''.join([c for c in recipe['time'] if c.isdigit()]))
            except:
                time_min = 180
            if time_min > max_time:
                continue
            if "å…¨éƒ¨" not in selected_cats and recipe['category'] not in selected_cats:
                continue
            recipe_ings = [i['name'] for i in recipe['ingredients']]
            if any(ing in recipe_ings for ing in recognized):
                # ä¸“å±é£Ÿæç­›é€‰ï¼ˆä¸å˜ï¼‰
                if set(recognized) == {'ç•ªèŒ„', 'é¸¡è›‹'} and name in ["ç•ªèŒ„é¸¡è›‹æ±¤", "ç•ªèŒ„ç‚’é¥­", "ç•ªèŒ„ç‚’è›‹"]:
                    filtered_recipes.append((name, recipe))
                elif set(recognized) == {'åœŸè±†', 'çŒªè‚‰'} and name not in ["è èœåœŸè±†æ³¥"]:
                    filtered_recipes.append((name, recipe))
                elif set(recognized) == {'è±†è…', 'é¦™è‡'} and name in ["é¦™è‡è±†è…ç„–é¥­", "è±†è…é¦™è‡æ±¤", "é¦™è‡è±†è…ç‚’é’èœ"]:
                    filtered_recipes.append((name, recipe))
                else:
                    filtered_recipes.append((name, recipe))
        
        # æ¢å¤æ¨ªå‘3åˆ—å¡ç‰‡+æŠ˜å å±•å¼€
        if filtered_recipes:
            st.markdown(f"## ğŸ‰ ä¸ºæ‚¨æ¨è {len(filtered_recipes)} ä¸ªèœè°±")
            # æ¨ªå‘3åˆ—å¸ƒå±€
            cols = st.columns(3)
            for idx, (name, recipe) in enumerate(filtered_recipes):
                with cols[idx % 3]:
                    # æŠ˜å é¢æ¿ï¼ˆé»˜è®¤åªæ˜¾ç¤ºèœå+åˆ†ç±»+è€—æ—¶ï¼‰
                    with st.expander(f"ğŸ½ï¸ {name}\n({recipe['category']} | {recipe['time']})", expanded=False):
                        # èœå“çœŸå®å›¾ï¼ˆå±…ä¸­å±•ç¤ºï¼‰
                        st.image(recipe['img_url'], caption=name, use_column_width=True)
                        # é£Ÿææ¸…å•ï¼ˆåˆ†2åˆ—ï¼‰
                        st.markdown("### ğŸ¥— é£Ÿææ¸…å•")
                        ing_cols = st.columns(2)
                        for i, ing in enumerate(recipe['ingredients']):
                            with ing_cols[i % 2]:
                                st.markdown(f"- **{ing['name']}**: {ing['amount']}")
                        # åˆ¶ä½œæ­¥éª¤
                        st.markdown("### ğŸ‘¨â€ğŸ³ åˆ¶ä½œæ­¥éª¤")
                        st.text(recipe['steps'])
                        # æ›¿ä»£+è¥å…»+å°è´´å£«
                        if recipe.get('alternatives'):
                            st.markdown("### ğŸ”„ æ›¿ä»£é£Ÿæ")
                            st.text(recipe['alternatives'])
                        col1, col2 = st.columns(2)
                        with col1:
                            st.info(f"è¥å…»ï¼š{recipe['nutrition']}")
                        with col2:
                            st.success(f"å°è´´å£«ï¼š{recipe['tips']}")
        else:
            st.warning("âš ï¸ æœªæ‰¾åˆ°åŒ¹é…çš„èœè°±ï¼Œè¯·è°ƒæ•´ç­›é€‰æ¡ä»¶ï¼")
    else:
        st.error("âŒ æœªè¯†åˆ«åˆ°æœ‰æ•ˆé£Ÿæï¼è¯·è¾“å…¥ï¼šç•ªèŒ„é¸¡è›‹ã€è±†è…é¦™è‡ã€åœŸè±†çŒªè‚‰ç­‰")

# å›¢é˜Ÿä¿¡æ¯
st.markdown("---")
st.markdown("**ğŸ‘¨â€ğŸ“ é¡¹ç›®å›¢é˜Ÿ: åˆ˜è•Šçªã€æˆšæ´‹æ´‹ã€ç‹ä½³æ…§ã€è¦ƒä¸½å¨œã€æ¬§å©·ã€è´ºé’°é‘«**")
st.caption("ã€Šäººå·¥æ™ºèƒ½é€šè¯†ã€‹å¤§ä½œä¸š - æ™ºèƒ½ç¾é£Ÿæ¨èç³»ç»Ÿ")
